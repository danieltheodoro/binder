#!/bin/bash
set -eux

# Bash
python3 -m bash_kernel.install

# Go (gophernotes)
echo "Instalando e registrando kernel de Go (gophernotes)..."
git clone --depth=1 https://github.com/gopherdata/gophernotes.git /tmp/gophernotes
cd /tmp/gophernotes
go install
mkdir -p ~/.local/share/jupyter/kernels/gophernotes
cp -r kernel/* ~/.local/share/jupyter/kernels/gophernotes
cd -

# C# (dotnet interactive)
echo "Instalando kernel do .NET (C#)..."
dotnet tool install --global Microsoft.dotnet-interactive
export PATH="$PATH:$HOME/.dotnet/tools"
dotnet interactive jupyter install --path ~/.local/share/jupyter/kernels

# Julia
echo "Registrando kernel do Julia..."
julia -e 'using IJulia; installkernel("Julia")'

# Java (IJava kernel)
echo "Instalando IJava kernel..."
git clone https://github.com/SpencerPark/IJava.git /tmp/IJava
cd /tmp/IJava
./gradlew installKernel --args="--user"
cd -

# R já vem configurado pelo conda + r-irkernel

# Node.js / JavaScript
echo "Instalando kernel de JavaScript (IJavascript)..."
npm install -g ijavascript
ijsinstall --install=local

# Corrigindo permissões de kernels (se necessário)
chmod -R 755 ~/.local/share/jupyter/kernels
